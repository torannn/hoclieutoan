<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng c·ª• S∆° ƒë·ªì Venn - Gi·∫£i to√°n logic</title>
    <link rel="stylesheet" href="assets/css/base.css">
    <style>
        :root {
            --color-bd: #3b82f6; /* Xanh d∆∞∆°ng */
            --color-cl: #10b981; /* Xanh l√° */
            --color-bc: #ef4444; /* ƒê·ªè */
            --color-bg: #f3f4f6;
            --color-text: #1f2937;
        }
        body {
            font-family: 'Lora', serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        #app-container {
            width: 100%;
            max-width: 1200px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            border: 1px solid #e5e7eb;
        }
        h1 {
            text-align: center;
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 2rem;
        }
        #main-content {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            align-items: center;
        }
        #data-panel, #venn-panel {
            flex: 1;
            min-width: 300px;
        }
        #data-panel {
            background-color: #fafafa;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e5e7eb;
        }
        #data-panel h2 {
            margin-top: 0;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--color-text);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .data-item {
            font-size: 1.1rem;
            margin-bottom: 12px;
            padding: 8px;
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }
        .venn-circle {
            mix-blend-mode: multiply;
        }
        .venn-text {
            font-size: 28px;
            font-weight: 700;
            text-anchor: middle;
            dominant-baseline: middle;
            fill: black;
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        .venn-text.visible {
            opacity: 1;
        }
        .venn-emoji {
            font-size: 48px;
            text-anchor: middle;
            dominant-baseline: middle;
        }
        #explanation-panel {
            width: 100%;
            margin-top: 2rem;
            padding: 20px;
            background-color: #eef2ff;
            border-radius: 12px;
            font-size: 1.25rem;
            line-height: 1.6;
            text-align: center;
            min-height: 80px;
            border: 2px dashed #c7d2fe;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 2rem;
        }
        .control-button {
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .control-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .control-button:disabled {
            background-color: #d1d5db;
            color: #6b7280;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        #prev-btn {
            background-color: #6b7280;
            color: white;
        }
        #next-btn {
            background-color: #3b82f6;
            color: white;
        }
    </style>
</head>
<body>
    <div id="app-container">
        <button onclick="window.history.back()" style="position: absolute; top: 20px; left: 20px; background-color: #3b82f6; color: white; border: none; border-radius: 8px; padding: 8px 16px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 5px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Quay l·∫°i
        </button>
        <h1>Minh h·ªça gi·∫£i to√°n b·∫±ng S∆° ƒë·ªì Venn</h1>
        <div id="main-content">
            <div id="data-panel">
                <h2>Gi·∫£ thi·∫øt</h2>
                <div id="data-bd" class="data-item">Ch∆°i <span style="color: var(--color-bd); font-weight: 700;">B√≥ng ƒë√° (Bƒê)</span>: 11</div>
                <div id="data-cl" class="data-item">Ch∆°i <span style="color: var(--color-cl); font-weight: 700;">C·∫ßu l√¥ng (CL)</span>: 10</div>
                <div id="data-bc" class="data-item">Ch∆°i <span style="color: var(--color-bc); font-weight: 700;">B√≥ng chuy·ªÅn (BC)</span>: 8</div>
                <div id="data-bd-cl" class="data-item">Ch∆°i <span style="color: var(--color-bd); font-weight: 700;">Bƒê</span> v√† <span style="color: var(--color-cl); font-weight: 700;">CL</span>: 4</div>
                <div id="data-bd-bc" class="data-item">Ch∆°i <span style="color: var(--color-bd); font-weight: 700;">Bƒê</span> v√† <span style="color: var(--color-bc); font-weight: 700;">BC</span>: 5</div>
                <div id="data-cl-bc" class="data-item">Ch∆°i <span style="color: var(--color-cl); font-weight: 700;">CL</span> v√† <span style="color: var(--color-bc); font-weight: 700;">BC</span>: 4</div>
                <div id="data-all" class="data-item">Ch∆°i c·∫£ 3 m√¥n: 2</div>
            </div>
            <div id="venn-panel">
                <svg id="venn-diagram-container" viewBox="0 0 500 400">
                    <circle cx="190" cy="150" r="110" fill="var(--color-bd)" opacity="0.5" class="venn-circle"/>
                    <circle cx="310" cy="150" r="110" fill="var(--color-cl)" opacity="0.5" class="venn-circle"/>
                    <circle cx="250" cy="250" r="110" fill="var(--color-bc)" opacity="0.5" class="venn-circle"/>
                    
                    <text x="135" y="95" class="venn-emoji">‚öΩÔ∏è</text>
                    <text x="365" y="95" class="venn-emoji">üè∏</text>
                    <text x="250" y="350" class="venn-emoji">üèê</text>

                    <text id="text-only-bd" x="140" y="150" class="venn-text"></text>
                    <text id="text-only-cl" x="360" y="150" class="venn-text"></text>
                    <text id="text-only-bc" x="250" y="310" class="venn-text"></text>
                    <text id="text-bd-cl" x="250" y="125" class="venn-text"></text>
                    <text id="text-bd-bc" x="200" y="240" class="venn-text"></text>
                    <text id="text-cl-bc" x="300" y="240" class="venn-text"></text>
                    <text id="text-all" x="250" y="195" class="venn-text"></text>
                </svg>
            </div>
        </div>

        <div id="explanation-panel">
            <p id="explanation-text">Nh·∫•n "Ti·∫øp theo" ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
        </div>

        <div id="controls">
            <button id="prev-btn" class="control-button">‚Äπ Quay l·∫°i</button>
            <button id="next-btn" class="control-button">Ti·∫øp theo ‚Ä∫</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const steps = [
                // Step 0: Initial state
                {
                    explanation: "B·∫Øt ƒë·∫ßu v·ªõi s∆° ƒë·ªì Venn tr·ªëng v√† c√°c d·ªØ ki·ªán c·ªßa b√†i to√°n.",
                    actions: []
                },
                // Step 1: Fill the center
                {
                    explanation: "<strong>B∆∞·ªõc 1:</strong> Ta ƒëi·ªÅn v√†o v√πng trung t√¢m (giao c·ªßa 3 t·∫≠p h·ª£p) tr∆∞·ªõc ti√™n. C√≥ <strong>2</strong> em ch∆°i c·∫£ 3 m√¥n.",
                    actions: [
                        { targetId: 'text-all', value: '2' }
                    ]
                },
                // Step 2: Fill BD and CL intersection
                {
                    explanation: "<strong>B∆∞·ªõc 2:</strong> V√πng giao Bƒê v√† CL c√≥ 4 em. Tr·ª´ ƒëi 2 em ·ªü l√µi, s·ªë em <i>ch·ªâ</i> ch∆°i Bƒê v√† CL l√†: <strong>4 - 2 = 2</strong>.",
                    actions: [
                        { targetId: 'text-all', value: '2' },
                        { targetId: 'text-bd-cl', value: '2' }
                    ]
                },
                // Step 3: Fill BD and BC intersection
                {
                    explanation: "<strong>B∆∞·ªõc 3:</strong> V√πng giao Bƒê v√† BC c√≥ 5 em. Tr·ª´ ƒëi 2 em ·ªü l√µi, s·ªë em <i>ch·ªâ</i> ch∆°i Bƒê v√† BC l√†: <strong>5 - 2 = 3</strong>.",
                    actions: [
                        { targetId: 'text-all', value: '2' },
                        { targetId: 'text-bd-cl', value: '2' },
                        { targetId: 'text-bd-bc', value: '3' }
                    ]
                },
                // Step 4: Fill CL and BC intersection
                {
                    explanation: "<strong>B∆∞·ªõc 4:</strong> V√πng giao CL v√† BC c√≥ 4 em. Tr·ª´ ƒëi 2 em ·ªü l√µi, s·ªë em <i>ch·ªâ</i> ch∆°i CL v√† BC l√†: <strong>4 - 2 = 2</strong>.",
                    actions: [
                        { targetId: 'text-all', value: '2' },
                        { targetId: 'text-bd-cl', value: '2' },
                        { targetId: 'text-bd-bc', value: '3' },
                        { targetId: 'text-cl-bc', value: '2' }
                    ]
                },
                // Step 5: Fill only BD
                {
                    explanation: "<strong>B∆∞·ªõc 5:</strong> T·ªïng s·ªë em ch∆°i Bƒê l√† 11. S·ªë em <i>ch·ªâ</i> ch∆°i Bƒê l√†: <strong>11 - (2 + 2 + 3) = 4</strong>.",
                    actions: [
                        { targetId: 'text-all', value: '2' },
                        { targetId: 'text-bd-cl', value: '2' },
                        { targetId: 'text-bd-bc', value: '3' },
                        { targetId: 'text-cl-bc', value: '2' },
                        { targetId: 'text-only-bd', value: '4' }
                    ]
                },
                // Step 6: Fill only CL
                {
                    explanation: "<strong>B∆∞·ªõc 6:</strong> T·ªïng s·ªë em ch∆°i CL l√† 10. S·ªë em <i>ch·ªâ</i> ch∆°i CL l√†: <strong>10 - (2 + 2 + 2) = 4</strong>.",
                    actions: [
                        { targetId: 'text-all', value: '2' },
                        { targetId: 'text-bd-cl', value: '2' },
                        { targetId: 'text-bd-bc', value: '3' },
                        { targetId: 'text-cl-bc', value: '2' },
                        { targetId: 'text-only-bd', value: '4' },
                        { targetId: 'text-only-cl', value: '4' }
                    ]
                },
                // Step 7: Fill only BC
                {
                    explanation: "<strong>B∆∞·ªõc 7:</strong> T·ªïng s·ªë em ch∆°i BC l√† 8. S·ªë em <i>ch·ªâ</i> ch∆°i BC l√†: <strong>8 - (3 + 2 + 2) = 1</strong>.",
                    actions: [
                        { targetId: 'text-all', value: '2' },
                        { targetId: 'text-bd-cl', value: '2' },
                        { targetId: 'text-bd-bc', value: '3' },
                        { targetId: 'text-cl-bc', value: '2' },
                        { targetId: 'text-only-bd', value: '4' },
                        { targetId: 'text-only-cl', value: '4' },
                        { targetId: 'text-only-bc', value: '1' }
                    ]
                },
                // Step 8: Final calculation
                {
                    explanation: "<strong>B∆∞·ªõc cu·ªëi:</strong> Sƒ© s·ªë l·ªõp l√† t·ªïng c√°c s·ªë trong 7 v√πng: <br><strong>4 + 4 + 1 + 2 + 3 + 2 + 2 = 18</strong>. V·∫≠y l·ªõp c√≥ 18 h·ªçc sinh.",
                    actions: [
                        { targetId: 'text-all', value: '2' },
                        { targetId: 'text-bd-cl', value: '2' },
                        { targetId: 'text-bd-bc', value: '3' },
                        { targetId: 'text-cl-bc', value: '2' },
                        { targetId: 'text-only-bd', value: '4' },
                        { targetId: 'text-only-cl', value: '4' },
                        { targetId: 'text-only-bc', value: '1' }
                    ]
                }
            ];

            let currentStep = 0;
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const explanationText = document.getElementById('explanation-text');
            const vennTexts = document.querySelectorAll('.venn-text');

            function resetState() {
                vennTexts.forEach(text => {
                    text.textContent = '';
                    text.classList.remove('visible');
                });
            }

            function renderStep(stepIndex) {
                resetState();
                const step = steps[stepIndex];
                
                explanationText.innerHTML = step.explanation;

                step.actions.forEach(action => {
                    const el = document.getElementById(action.targetId);
                    if (el) {
                        el.textContent = action.value;
                        el.classList.add('visible');
                    }
                });
                
                prevBtn.disabled = stepIndex === 0;
                nextBtn.disabled = stepIndex === steps.length - 1;
            }

            nextBtn.addEventListener('click', () => {
                if (currentStep < steps.length - 1) {
                    currentStep++;
                    renderStep(currentStep);
                }
            });

            prevBtn.addEventListener('click', () => {
                if (currentStep > 0) {
                    currentStep--;
                    renderStep(currentStep);
                }
            });

            // Initial render
            renderStep(0);
        });
    </script>
</body>
</html>
